{% extends '::base.html.twig' %}

{% block title %}Votre compte{% endblock %}


{% block content %}

    <!-- autocomplete -->
    <!-- Include Google Maps JS API -->
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyACy7onU8CqMCYELVjWBJhGjiG6Wo_Sths">
    </script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/autocomplete.js') }}"></script>

    <div class="container">
        <h1>Votre compte</h1>
        <ul>
            <li>E-mail : {{ app.user.email }}</li>
        </ul>
        Vos adresses :
        {% if app.user.address is not empty %}
            <ul>
            {% for address in app.user.address %}
                <li> Type : {{ address.type }}<br />Adresse : {{ address.streetNumber }}, {{ address.street }} {{ address.cp }} - {{ address.city }}</li>
            {% endfor %}
            </ul>
            {% else %}
            <p>Aucune adresse renseigné ! :'(</p>
        {% endif %}

        <h2>Ajouter une adresse</h2>
        {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}

        {# Les erreurs générales du formulaire. #}
        {{ form_errors(form) }}

        <label>Votre adresse : </label>
        <input id="user_input_autocomplete_address" placeholder="Entrez votre adresse">

        {# génération rapide car ce sont des input de type hidden#}
        {{ form_row(form.streetNumber) }}
        {{ form_row(form.street) }}
        {{ form_row(form.cp) }}
        {{ form_row(form.city) }}

        {# Génération automatique des champs pas encore écrits.
         Dans cet exemple, ce serait le champ CSRF (géré automatiquement par Symfony !)
         et tous les champs cachés (type « hidden »). #}
        {{ form_rest(form) }}

        <button type="submit" class="btn btn-default">Ajouter</button>
        {# Fermeture de la balise <form> du formulaire HTML #}
        {{ form_end(form) }}



    </div>
{% endblock %}